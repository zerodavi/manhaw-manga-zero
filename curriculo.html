<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gerador de Currículo</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f6fb;
        margin: 0;
        padding: 0;
    }
    .container {
        max-width: 900px;
        margin: auto;
        padding: 20px;
    }
    h1 {
        text-align: center;
        color: #0ea5a4;
    }
    input, textarea, select, button {
        width: 100%;
        padding: 8px;
        margin: 5px 0 15px 0;
        box-sizing: border-box;
        border-radius: 5px;
        border: 1px solid #ccc;
    }
    button {
        background-color: #0ea5a4;
        color: white;
        border: none;
        cursor: pointer;
    }
    button:hover {
        background-color: #028f8a;
    }
    #resume {
        background-color: white;
        padding: 20px;
        margin-top: 20px;
        border-radius: 10px;
    }
    #resume img {
        max-width: 120px;
        border-radius: 50%;
        display: block;
        margin-bottom: 15px;
    }
    .section {
        margin-bottom: 15px;
    }
    .section h2 {
        color: #0ea5a4;
        margin-bottom: 5px;
    }
    .entry {
        margin-left: 10px;
        margin-bottom: 5px;
    }
    .flex-row {
        display: flex;
        gap: 10px;
    }
</style>
</head>
<body>
<div class="container">
    <h1>Gerador de Currículo</h1>
    <div>
        <label>Foto de Perfil:</label>
        <input type="file" id="photoInput" accept="image/*">
    </div>
    <div>
        <label>Nome Completo:</label>
        <input type="text" id="nameInput" placeholder="Seu nome">
    </div>
    <div>
        <label>Resumo Profissional:</label>
        <textarea id="summaryInput" placeholder="Resumo sobre você..."></textarea>
    </div>

    <div class="section">
        <h2>Habilidades</h2>
        <div id="skillsList"></div>
        <div class="flex-row">
            <input type="text" id="skillInput" placeholder="Nova habilidade">
            <button onclick="addSkill()">Adicionar</button>
        </div>
    </div>

    <div class="section">
        <h2>Experiência</h2>
        <div id="experienceList"></div>
        <div class="flex-row">
            <input type="text" id="experienceInput" placeholder="Nova experiência">
            <button onclick="addExperience()">Adicionar</button>
        </div>
    </div>

    <div class="section">
        <h2>Formação</h2>
        <div id="educationList"></div>
        <div class="flex-row">
            <input type="text" id="educationInput" placeholder="Nova formação">
            <button onclick="addEducation()">Adicionar</button>
        </div>
    </div>

    <button onclick="generateResume()">Gerar Currículo</button>
    <button onclick="downloadPDF()">Baixar PDF</button>

    <div id="resume"></div>
</div>

<!-- JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
let photoData = '';

document.getElementById('photoInput').addEventListener('change', function(event){
    const file = event.target.files[0];
    if(file){
        const reader = new FileReader();
        reader.onload = function(e){
            photoData = e.target.result;
        }
        reader.readAsDataURL(file);
    }
});

function addSkill(){
    const skill = document.getElementById('skillInput').value.trim();
    if(skill){
        const div = document.createElement('div');
        div.textContent = skill;
        div.classList.add('entry');
        document.getElementById('skillsList').appendChild(div);
        document.getElementById('skillInput').value = '';
    }
}

function addExperience(){
    const exp = document.getElementById('experienceInput').value.trim();
    if(exp){
        const div = document.createElement('div');
        div.textContent = exp;
        div.classList.add('entry');
        document.getElementById('experienceList').appendChild(div);
        document.getElementById('experienceInput').value = '';
    }
}

function addEducation(){
    const edu = document.getElementById('educationInput').value.trim();
    if(edu){
        const div = document.createElement('div');
        div.textContent = edu;
        div.classList.add('entry');
        document.getElementById('educationList').appendChild(div);
        document.getElementById('educationInput').value = '';
    }
}

function generateResume(){
    const name = document.getElementById('nameInput').value.trim();
    const summary = document.getElementById('summaryInput').value.trim();

    let resumeHTML = '';
    if(photoData){
        resumeHTML += `<img src="${photoData}" alt="Foto">`;
    }
    resumeHTML += `<h1>${name}</h1>`;
    if(summary) resumeHTML += `<p>${summary}</p>`;

    const skills = document.getElementById('skillsList').innerHTML;
    if(skills) resumeHTML += `<div class="section"><h2>Habilidades</h2>${skills}</div>`;

    const experiences = document.getElementById('experienceList').innerHTML;
    if(experiences) resumeHTML += `<div class="section"><h2>Experiência</h2>${experiences}</div>`;

    const education = document.getElementById('educationList').innerHTML;
    if(education) resumeHTML += `<div class="section"><h2>Formação</h2>${education}</div>`;

    document.getElementById('resume').innerHTML = resumeHTML;
}

function downloadPDF(){
    const { jsPDF } = window.jspdf;
    html2canvas(document.getElementById('resume')).then(canvas => {
        const imgData = canvas.toDataURL('image/png');
        const pdf = new jsPDF('p', 'pt', 'a4');
        const imgProps = pdf.getImageProperties(imgData);
        const pdfWidth = pdf.internal.pageSize.getWidth();
        const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
        pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
        pdf.save('curriculo.pdf');
    });
}
</script>
</body>
</html>
